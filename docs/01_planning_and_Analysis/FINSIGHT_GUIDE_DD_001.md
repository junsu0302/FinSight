# 데이터 정의서 작성 가이드 (Data Dictionary Guide)

| 문서 ID       | FINSIGNT-GUIDE-DD-001 |
| :------------ | :-------------------- |
| **문서 버전** | 1.0                   |
| **프로젝트**  | FinSight              |
| **작성자**    | 김준수                |
| **작성일**    | 2025년 9월 15일       |

---

## 1. 문서 개요

본 문서는 FinSight 프로젝트에서 수집하고 가공하는 모든 데이터의 구조와 속성을 체계적으로 관리하기 위한 **데이터 정의서(Data Dictionary)의 작성 표준**을 정의한다. 이 가이드를 통해 모든 팀원은 데이터의 명확한 의미, 형식, 그리고 활용 목적을 일관되게 이해하고 기술할 수 있다.

잘 작성된 데이터 정의서는 **데이터 품질(Quality), 추적성(Lineage), 정합성(Integrity)**을 보장하며, 이는 **유지보수 가능한 데이터 파이프라인**과 **신뢰성 있는 분석 모델** 개발의 핵심 초석이 된다.

---

## 2. 작성 원칙

1.  **완전성**: 외부 시스템(KIS API 등)으로부터 수집되는 모든 원천(Raw) 데이터와, 가공을 통해 생성된 모든 파생(Derived) 데이터는 반드시 정의되어야 한다.
2.  **명확성**: 컬럼명과 설명은 누가 보더라도 의미를 명확하게 파악할 수 있도록 구체적이고 서술적으로 작성한다. 약어나 모호한 표현의 사용을 지양한다.
3.  **일관성**: 유사한 의미를 가진 데이터는 프로젝트 전반에 걸쳐 일관된 컬럼명과 데이터 타입을 사용한다.
4.  **현행성**: 데이터 파이프라인 변경, 피처 추가 등 데이터 구조에 변경이 발생할 경우, 관련 데이터 정의서를 **즉시 업데이트**해야 한다.

---

## 3. 구성 항목 정의

데이터 정의서는 크게 **테이블 명세**와 **컬럼 명세**로 구성된다.

### 3.1. 테이블 명세

각 데이터 테이블의 개요를 설명하는 부분이다.

| 항목                | 설명                                                            | 작성 예시                                                                           |
| :------------------ | :-------------------------------------------------------------- | :---------------------------------------------------------------------------------- |
| **테이블 ID**       | `[DB명]_[테이블명]` 형식으로 고유하게 부여한다.                 | `rawdb_daily_stock_price`                                                           |
| **테이블명 (한글)** | 테이블이 담고 있는 데이터의 내용을 명확히 설명하는 한글 이름.   | 일별 주가 시세                                                                      |
| **설명**            | 데이터의 출처, 수집 주기, 핵심 내용 등 테이블에 대한 상세 설명. | KIS API의 '국내주식기간별시세'를 통해 매일 수집되는 개별 종목의 일봉 데이터(OHLCV). |

### 3.2. 컬럼 명세

테이블을 구성하는 각 컬럼의 속성을 상세히 기술하는 핵심 부분이다. 데이터의 생명주기 전반을 관리하기 위해 아래 9가지 항목으로 구성한다.

| 항목                        | 설명                                                                                                                                                                                                              | 작성 가이드 및 예시 |
| :-------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------ |
| **컬럼명 (영문)**           | **[규칙]** 소문자 스네이크 케이스(`snake_case`)를 사용한다. <br> **[예시]** `stck_clpr`, `prdy_vrss_vol_rate`                                                                                                     |
| **컬럼명 (한글)**           | **[규칙]** 컬럼의 의미를 가장 잘 나타내는 공식적인 한글 명칭을 사용한다. <br> **[예시]** `주식 종가`, `전일 대비 거래량 비율`                                                                                     |
| **데이터 타입**             | **[규칙]** PostgreSQL DWH에 저장될 실제 데이터 타입을 명시한다. <br> **[예시]** `VARCHAR(8)`, `BIGINT`, `FLOAT8`, `TIMESTAMP`                                                                                     |
| **중요도**                  | **[규칙]** FinSight 프로젝트 목표 기여도를 기준으로 **[필수], [상], [중], [하]** 4단계로 평가한다. <br> **[필수]**: 핵심 식별자/목표 변수, **[상]**: 핵심 팩터 원천, **[중]**: 보조 지표, **[하]**: 우선순위 낮음 |
| **설명**                    | **[규칙]** 데이터가 무엇을 의미하는지, 단위는 무엇인지 구체적으로 서술한다. <br> **[예시]** `정규장 마감 시점의 최종 체결 가격 (단위: 원)`                                                                        |
| **활용방안**                | **[규칙]** 이 컬럼이 FinSight 프로젝트에서 **어떻게 사용될지** 구체적인 계획을 기술한다. <br> **[예시]** `수익률, 변동성 등 기술적 지표 계산의 기반으로 활용`, `PER 등 밸류에이션 팩터 계산에 사용`               |
| **유효성 규칙 (품질)**      | **[규칙]** 데이터가 지켜야 할 **최소한의 품질 기준**을 명시한다. (값의 범위, 형식, 허용 목록 등) <br> **[예시]** `0 이상의 정수`, `YYYYMMDD 형식`, `['KOSPI', 'KOSDAQ'] 내의 값`                                  |
| **NULL 처리 방안 (정합성)** | **[규칙]** NULL 값의 의미와 기본 처리 정책을 정의한다. <br> **[예시]** `NULL 허용 안 함 (NOT NULL)`, `적자 기업으로 PER 계산 불가 시 NULL 허용. 모델링 시 0으로 대체.`                                            |
| **파생 근거 (추적성)**      | **[규칙]** **파생 변수(Derived Feature)의 경우에만 작성.** 어떤 원천 데이터와 로직으로 생성되었는지 명시한다. <br> **[예시]** `rawdb_daily_stock_price.stck_clpr 컬럼 기준, 최근 20일 단순 이동평균`              |

---

## 4. 작성 예시

### 예시 1: 원천 데이터 테이블

**테이블 ID**: `rawdb_daily_stock_price`
**테이블명 (한글)**: 일별 주가 시세
**설명**: KIS API의 '국내주식기간별시세'를 통해 매일 수집되는 개별 종목의 일봉 데이터(OHLCV).

| 컬럼명 (영문)    | 컬럼명 (한글)  | 데이터 타입  | 중요도     | 설명                                           | 활용방안                                          | 유효성 규칙 (품질) | NULL 처리 방안 (정합성) | 파생 근거 (추적성) |
| :--------------- | :------------- | :----------- | :--------- | :--------------------------------------------- | :------------------------------------------------ | :----------------- | :---------------------- | :----------------- |
| `stck_bsop_date` | 주식 영업 일자 | `VARCHAR(8)` | **[필수]** | YYYYMMDD 형식의 날짜. 시계열 데이터의 기준 축. | 모든 시계열 데이터의 Index로 사용.                | YYYYMMDD 형식      | NOT NULL                | N/A                |
| `stck_clpr`      | 주식 종가      | `BIGINT`     | **[필수]** | 정규장 마감 시점의 최종 체결 가격 (단위: 원).  | 일별 수익률 및 변동성 계산의 핵심 기반.           | 0 이상의 정수      | NOT NULL                | N/A                |
| `acml_vol`       | 누적 거래량    | `BIGINT`     | **[상]**   | 해당 날짜에 체결된 총 주식 수량 (단위: 주).    | 거래량 기반 기술적 지표 생성 및 시장 모멘텀 분석. | 0 이상의 정수      | NOT NULL                | N/A                |

### 예시 2: 파생 데이터 테이블 (DWH)

**테이블 ID**: `dwh_daily_features`
**테이블명 (한글)**: 일별 통합 피처
**설명**: 원천 데이터를 가공하여 생성한, 모델 학습용 기술적/기본적 피처 통합 테이블.

| 컬럼명 (영문)    | 컬럼명 (한글) | 데이터 타입  | 중요도     | 설명                                   | 활용방안                                            | 유효성 규칙 (품질) | NULL 처리 방안 (정합성)              | 파생 근거 (추적성)                                                  |
| :--------------- | :------------ | :----------- | :--------- | :------------------------------------- | :-------------------------------------------------- | :----------------- | :----------------------------------- | :------------------------------------------------------------------ |
| `date`           | 기준 일자     | `DATE`       | **[필수]** | YYYY-MM-DD 형식의 날짜.                | 테이블의 Primary Key.                               | YYYY-MM-DD 형식    | NOT NULL                             | `rawdb_daily_stock_price.stck_bsop_date`                            |
| `stock_code`     | 종목 코드     | `VARCHAR(6)` | **[필수]** | 6자리 표준 종목 코드.                  | 테이블의 Primary Key.                               | 6자리 숫자/알파벳  | NOT NULL                             | `dim_stock_master.stock_code`                                       |
| `volatility_20d` | 20일 변동성   | `FLOAT8`     | **[필수]** | 최근 20 영업일 종가 수익률의 표준편차. | 변동성 예측 모델의 핵심 목표 변수(Target Variable). | 0 이상의 실수      | NOT NULL                             | `rawdb_daily_stock_price.stck_clpr` 기준, 20일 로그 수익률 표준편차 |
| `ma_20d`         | 20일 이동평균 | `FLOAT8`     | **[상]**   | 최근 20 영업일 종가의 산술 평균.       | 주가 추세 판단을 위한 핵심 기술적 피처.             | 0 이상의 실수      | NULL 허용 (최근 20일 데이터 부족 시) | `rawdb_daily_stock_price.stck_clpr` 기준, 20일 단순 이동평균        |
